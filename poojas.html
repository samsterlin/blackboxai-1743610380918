<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poojas - Kuriyanvila Sree Bhadrakali Temple</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Raleway:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .heading { font-family: 'Raleway', sans-serif; }
    </style>
</head>
<body class="bg-orange-50">
    <header class="bg-white shadow-md fixed w-full top-0 z-50">
        <nav class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <img src="https://images.pexels.com/photos/6147365/pexels-photo-6147365.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Temple Logo" class="h-12 w-12 rounded-full object-cover">
                    <h1 class="ml-3 text-2xl font-bold text-orange-800 heading">Kuriyanvila Sree Bhadrakali Temple</h1>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html" class="text-orange-800 hover:text-orange-600 font-medium">Home</a>
                    <a href="index.html#about" class="text-orange-800 hover:text-orange-600 font-medium">About</a>
                    <a href="index.html#events" class="text-orange-800 hover:text-orange-600 font-medium">Events</a>
                    <a href="poojas.html" class="text-orange-800 hover:text-orange-600 font-medium">Poojas</a>
                    <a href="donation.html" class="text-orange-800 hover:text-orange-600 font-medium">Donate</a>
                    <a href="index.html#contact" class="text-orange-800 hover:text-orange-600 font-medium">Contact</a>
                </div>
                <button class="md:hidden text-orange-800">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </nav>
    </header>

    <section class="pt-24 pb-20">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl font-bold text-center mb-8 text-orange-800 heading">Temple Poojas</h1>
            <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">
                Experience the divine blessings through our various pooja offerings. Each pooja is performed with utmost devotion and adherence to traditional rituals.
            </p>

            <div class="max-w-5xl mx-auto">
                <h2 class="text-2xl font-bold mb-6 text-orange-800 heading">Regular Poojas</h2>
                <div class="grid md:grid-cols-2 gap-6 mb-12">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-800">Archana</h3>
                        <p class="text-gray-600 mb-4">Simple pooja performed with flowers and mantras, seeking the blessings of the deity.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-orange-600 font-semibold">₹51</span>
                            <button onclick="openBookingForm(1, 'Archana', 51)" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition duration-300">Book Now</button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-800">Pushpanjali</h3>
                        <p class="text-gray-600 mb-4">Special flower offering to the deity with chanting of sacred mantras.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-orange-600 font-semibold">₹101</span>
                            <button onclick="openBookingForm(2, 'Pushpanjali', 101)" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition duration-300">Book Now</button>
                        </div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold mb-6 text-orange-800 heading">Special Poojas</h2>
                <div class="grid md:grid-cols-2 gap-6 mb-12">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-800">Udayasthamana Pooja</h3>
                        <p class="text-gray-600 mb-4">Full day pooja performed from sunrise to sunset, includes special offerings and rituals.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-orange-600 font-semibold">₹1,001</span>
                            <button onclick="openBookingForm(3, 'Udayasthamana Pooja', 1001)" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition duration-300">Book Now</button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-800">Ganapathi Homam</h3>
                        <p class="text-gray-600 mb-4">Sacred fire ritual dedicated to Lord Ganesha for removing obstacles.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-orange-600 font-semibold">₹751</span>
                            <button onclick="openBookingForm(4, 'Ganapathi Homam', 751)" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition duration-300">Book Now</button>
                        </div>
                    </div>
                </div>

                <h2 class="text-2xl font-bold mb-6 text-orange-800 heading">Festival Poojas</h2>
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-800">Mandala Pooja</h3>
                        <p class="text-gray-600 mb-4">Special 41-day pooja performed during the Mandalam season.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-orange-600 font-semibold">₹2,001</span>
                            <button onclick="openBookingForm(5, 'Mandala Pooja', 2001)" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition duration-300">Book Now</button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-800">Makam Thozhal</h3>
                        <p class="text-gray-600 mb-4">Special pooja performed during the auspicious Makam star day.</p>
                        <div class="flex justify-between items-center">
                            <span class="text-orange-600 font-semibold">₹1,501</span>
                            <button onclick="openBookingForm(6, 'Makam Thozhal', 1501)" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition duration-300">Book Now</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="max-w-3xl mx-auto mt-12 bg-white rounded-xl shadow-lg p-8">
                <h3 class="text-xl font-bold mb-4 text-orange-800">Important Information</h3>
                <ul class="space-y-3 text-gray-600">
                    <li class="flex items-start">
                        <i class="fas fa-info-circle text-orange-600 mt-1 mr-3"></i>
                        <span>Pooja timings may vary during special occasions and festivals</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-info-circle text-orange-600 mt-1 mr-3"></i>
                        <span>Advance booking is recommended for special poojas</span>
                    </li>
                    <li class="flex items-start">
                        <i class="fas fa-info-circle text-orange-600 mt-1 mr-3"></i>
                        <span>Please arrive 30 minutes before the scheduled pooja time</span>
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <footer class="bg-orange-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">Kuriyanvila Sree Bhadrakali Temple</h3>
                    <p class="text-orange-200">A sacred abode where divinity and devotion merge in eternal harmony.</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="index.html#about" class="text-orange-200 hover:text-white">About Us</a></li>
                        <li><a href="index.html#events" class="text-orange-200 hover:text-white">Events</a></li>
                        <li><a href="poojas.html" class="text-orange-200 hover:text-white">Poojas</a></li>
                        <li><a href="donation.html" class="text-orange-200 hover:text-white">Donate</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Temple Hours</h3>
                    <ul class="space-y-2 text-orange-200">
                        <li>Monday - Friday: 3:30 AM - 8:30 PM</li>
                        <li>Saturday: 3:30 AM - 8:30 PM</li>
                        <li>Sunday: 3:30 AM - 8:30 PM</li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-orange-800 mt-8 pt-8 text-center text-orange-200">
                <p>&copy; 2024 Kuriyanvila Sree Bhadrakali Temple. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Booking Form Modal -->
    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl w-full mx-4 max-h-90vh overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-orange-800 heading">Book Pooja</h2>
                <button onclick="closeBookingForm()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="poojaBookingForm" class="space-y-6">
                <input type="hidden" id="pooja_id" name="pooja_id">
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Pooja Name</label>
                        <input type="text" id="pooja_name" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100" readonly>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Amount (₹)</label>
                        <input type="text" id="pooja_amount" class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100" readonly>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Booking Date *</label>
                        <input type="date" id="booking_date" name="booking_date" required
                               min="" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Preferred Time</label>
                        <select id="preferred_time" name="preferred_time"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                            <option value="">Select Time</option>
                            <option value="04:00">4:00 AM</option>
                            <option value="05:00">5:00 AM</option>
                            <option value="06:00">6:00 AM</option>
                            <option value="07:00">7:00 AM</option>
                            <option value="08:00">8:00 AM</option>
                            <option value="09:00">9:00 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="17:00">5:00 PM</option>
                            <option value="18:00">6:00 PM</option>
                            <option value="19:00">7:00 PM</option>
                        </select>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Full Name *</label>
                        <input type="text" id="devotee_name" name="devotee_name" required
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500"
                               placeholder="Enter your full name">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Email *</label>
                        <input type="email" id="devotee_email" name="devotee_email" required
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500"
                               placeholder="Enter your email">
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Phone Number</label>
                        <input type="tel" id="devotee_phone" name="devotee_phone"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500"
                               placeholder="Enter your phone number">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Birth Star (Nakshatra)</label>
                        <select id="star_birth" name="star_birth"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                            <option value="">Select Birth Star</option>
                            <option value="Ashwini">Ashwini</option>
                            <option value="Bharani">Bharani</option>
                            <option value="Krittika">Krittika</option>
                            <option value="Rohini">Rohini</option>
                            <option value="Mrigashira">Mrigashira</option>
                            <option value="Ardra">Ardra</option>
                            <option value="Punarvasu">Punarvasu</option>
                            <option value="Pushya">Pushya</option>
                            <option value="Ashlesha">Ashlesha</option>
                            <option value="Magha">Magha</option>
                            <option value="Purva Phalguni">Purva Phalguni</option>
                            <option value="Uttara Phalguni">Uttara Phalguni</option>
                            <option value="Hasta">Hasta</option>
                            <option value="Chitra">Chitra</option>
                            <option value="Swati">Swati</option>
                            <option value="Vishakha">Vishakha</option>
                            <option value="Anuradha">Anuradha</option>
                            <option value="Jyeshtha">Jyeshtha</option>
                            <option value="Mula">Mula</option>
                            <option value="Purva Ashadha">Purva Ashadha</option>
                            <option value="Uttara Ashadha">Uttara Ashadha</option>
                            <option value="Shravana">Shravana</option>
                            <option value="Dhanishta">Dhanishta</option>
                            <option value="Shatabhisha">Shatabhisha</option>
                            <option value="Purva Bhadrapada">Purva Bhadrapada</option>
                            <option value="Uttara Bhadrapada">Uttara Bhadrapada</option>
                            <option value="Revati">Revati</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-gray-700 font-medium mb-2">Rashi (Moon Sign)</label>
                    <select id="rashi" name="rashi"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                        <option value="">Select Rashi</option>
                        <option value="Mesha">Mesha (Aries)</option>
                        <option value="Vrishabha">Vrishabha (Taurus)</option>
                        <option value="Mithuna">Mithuna (Gemini)</option>
                        <option value="Karkata">Karkata (Cancer)</option>
                        <option value="Simha">Simha (Leo)</option>
                        <option value="Kanya">Kanya (Virgo)</option>
                        <option value="Tula">Tula (Libra)</option>
                        <option value="Vrischika">Vrischika (Scorpio)</option>
                        <option value="Dhanu">Dhanu (Sagittarius)</option>
                        <option value="Makara">Makara (Capricorn)</option>
                        <option value="Kumbha">Kumbha (Aquarius)</option>
                        <option value="Meena">Meena (Pisces)</option>
                    </select>
                </div>

                <button type="submit" 
                        class="w-full bg-orange-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-700 transition duration-300">
                    Proceed to Payment
                </button>
            </form>
        </div>
    </div>

    <!-- Razorpay Checkout -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>
        // Set minimum date to tomorrow
        document.addEventListener('DOMContentLoaded', function() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('booking_date').min = tomorrow.toISOString().split('T')[0];
        });

        function openBookingForm(poojaId, poojaName, amount) {
            document.getElementById('pooja_id').value = poojaId;
            document.getElementById('pooja_name').value = poojaName;
            document.getElementById('pooja_amount').value = amount;
            document.getElementById('bookingModal').classList.remove('hidden');
            document.getElementById('bookingModal').classList.add('flex');
        }

        function closeBookingForm() {
            document.getElementById('bookingModal').classList.add('hidden');
            document.getElementById('bookingModal').classList.remove('flex');
        }

        document.getElementById('poojaBookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                pooja_id: document.getElementById('pooja_id').value,
                booking_date: document.getElementById('booking_date').value,
                preferred_time: document.getElementById('preferred_time').value,
                devotee_name: document.getElementById('devotee_name').value,
                devotee_email: document.getElementById('devotee_email').value,
                devotee_phone: document.getElementById('devotee_phone').value,
                star_birth: document.getElementById('star_birth').value,
                rashi: document.getElementById('rashi').value,
                amount: document.getElementById('pooja_amount').value
            };

            // Initialize Razorpay payment
            const options = {
                key: 'rzp_live_0JfwyI7Nffyoxa', // Replace with your Razorpay key
                amount: formData.amount * 100, // Amount in paise
                currency: 'INR',
                name: 'Kuriyanvila Sree Bhadrakali Temple',
                description: document.getElementById('pooja_name').value + ' Booking',
                image: 'https://images.pexels.com/photos/6147365/pexels-photo-6147365.jpeg',
                prefill: {
                    name: formData.devotee_name,
                    email: formData.devotee_email,
                    contact: formData.devotee_phone
                },
                handler: function(response) {
                    // Add payment ID to form data
                    formData.payment_id = response.razorpay_payment_id;

                    // Submit booking to server
                    fetch('process_pooja.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: new URLSearchParams(formData)
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.status === 'success') {
                            // Redirect to success page with booking details
                            const params = new URLSearchParams({
                                reference: data.reference_number,
                                date: formData.booking_date,
                                time: formData.preferred_time,
                                amount: formData.amount
                            });
                            window.location.href = 'pooja-success.html?' + params.toString();
                        } else {
                            alert('Booking failed: ' + data.message);
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('An error occurred while processing your booking');
                    });
                },
                modal: {
                    ondismiss: function() {
                        alert('Payment cancelled');
                    }
                }
            };

            const rzp = new Razorpay(options);
            rzp.open();
        });
    </script>
</body>
</html>
